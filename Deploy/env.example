# Noveris AI Platform - Environment Variables
# Copy this file to .env and update the values
# WARNING: Never commit actual secrets to version control!

# =============================================================================
# Application Configuration
# =============================================================================
APP_NAME=noveris-api
APP_ENV=development
APP_VERSION=1.0.0
APP_DESCRIPTION=Noveris AI Platform API

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8080
API_WORKERS=4
API_LIMIT_CONCURRENCY=1000
API_TIMEOUT_KEEP_ALIVE=5

# =============================================================================
# Frontend Configuration
# =============================================================================
FRONTEND_BASE_URL=http://localhost:3000
SSO_SUCCESS_REDIRECT_PATH=/dashboard

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-CSRF-Token,X-Requested-With
CORS_EXPOSE_HEADERS=
CORS_CREDENTIALS=true

# =============================================================================
# Database Configuration
# =============================================================================
DB_DSN=postgresql+asyncpg://noveris_user:CHANGE_THIS_PASSWORD@postgres:5432/noveris_db
DSN=postgresql://noveris_user:CHANGE_THIS_PASSWORD@postgres:5432/noveris_db
DB_NAME=noveris_db
DB_USER=noveris_user
DB_PASSWORD=CHANGE_THIS_PASSWORD
DB_PORT=5432

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_ENABLED=true
REDIS_DSN=redis://:dev_redis_password@redis:6379/0
REDIS_PASSWORD=dev_redis_password
REDIS_PORT=6379
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# =============================================================================
# Security Configuration
# =============================================================================
SECRET_KEY=CHANGE_THIS_TO_A_VERY_SECURE_32+_CHARACTER_RANDOM_KEY

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true

# Argon2id Configuration
ARGON2_TIME_COST=1
ARGON2_MEMORY_COST=65536
ARGON2_PARALLELISM=4
ARGON2_HASH_LEN=32
ARGON2_SALT_LEN=16

# =============================================================================
# Session Configuration
# =============================================================================
SESSION_COOKIE_NAME=session
SESSION_COOKIE_DOMAIN=
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_TTL=86400
SESSION_REMEMBER_TTL=2592000
SESSION_MAX_SESSIONS_PER_USER=5

# =============================================================================
# CSRF Configuration
# =============================================================================
CSRF_ENABLED=true
CSRF_COOKIE_NAME=csrf_token
CSRF_COOKIE_DOMAIN=
CSRF_COOKIE_SECURE=false
CSRF_COOKIE_HTTPONLY=false
CSRF_COOKIE_SAMESITE=strict
CSRF_TOKEN_LENGTH=32
CSRF_EXEMPT_ROUTES=/api/v1/csrf,/api/v1/healthz,/api/v1/readyz
CSRF_EXEMPT_METHODS=GET,HEAD,OPTIONS

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_LOGIN_ATTEMPTS=5
RATE_LIMIT_LOGIN_WINDOW=300
RATE_LIMIT_CODE_REQUESTS=3
RATE_LIMIT_CODE_WINDOW=3600

# =============================================================================
# Verification Configuration
# =============================================================================
VERIFY_CODE_LENGTH=6
VERIFY_CODE_TTL=600
RESET_TOKEN_TTL=3600
RESET_MODE=token
REGISTER_REQUIRE_CODE=false

# =============================================================================
# Email Configuration (SMTP)
# =============================================================================
SMTP_ENABLED=false
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=noreply@noveris.ai
SMTP_USE_TLS=true

# =============================================================================
# SSO Configuration
# =============================================================================
# Format: provider_id|provider_name|enabled|key=value|...
# Example for Google OIDC:
# SSO_OIDC_PROVIDERS=google|Google|true|client_id=xxx|client_secret=yyy|discovery_url=https://accounts.google.com/.well-known/openid-configuration
SSO_OIDC_PROVIDERS=

# Example for GitHub OAuth2:
# SSO_OAUTH2_PROVIDERS=github|GitHub|true|client_id=xxx|client_secret=yyy|authorization_endpoint=https://github.com/login/oauth/authorize|token_endpoint=https://github.com/login/oauth/access_token|userinfo_endpoint=https://api.github.com/user
SSO_OAUTH2_PROVIDERS=

# SAML providers configuration
SSO_SAML_PROVIDERS=

# =============================================================================
# MinIO Configuration
# =============================================================================
MINIO_ENABLED=false
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=
MINIO_BUCKET=noveris
MINIO_SECURE=false

# =============================================================================
# Elasticsearch Configuration
# =============================================================================
ES_ENABLED=false
ES_DSN=http://elasticsearch:9200

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Alembic Configuration
# =============================================================================
AUTO_MIGRATE=true
ALEMBIC_CONFIG_PATH=/app/alembic.ini

# =============================================================================
# Trusted Proxy Configuration
# =============================================================================
TRUSTED_PROXY_ENABLED=false
TRUSTED_PROXY_LIST=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# =============================================================================
# Domain Configuration (for production)
# =============================================================================
DOMAIN_NAME=your-domain.com
FRONTEND_ORIGIN=https://your-domain.com

# =============================================================================
# Service Ports
# =============================================================================
FRONTEND_PORT=3000
BACKEND_PORT=8080

# =============================================================================
# SSL Configuration (for production)
# =============================================================================
SSL_CERT_PATH=/etc/ssl/certs/ssl.crt
SSL_KEY_PATH=/etc/ssl/private/ssl.key

# =============================================================================
# Monitoring
# =============================================================================
METRICS_ENABLED=false
METRICS_PORT=9090

# =============================================================================
# Docker Resource Limits
# =============================================================================
POSTGRES_MEMORY_LIMIT=512M
POSTGRES_CPU_LIMIT=0.5
POSTGRES_MEMORY_RESERVATION=256M
POSTGRES_CPU_RESERVATION=0.25

REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_RESERVATION=128M
REDIS_CPU_RESERVATION=0.1

BACKEND_MEMORY_LIMIT=1G
BACKEND_CPU_LIMIT=1
BACKEND_MEMORY_RESERVATION=512M
BACKEND_CPU_RESERVATION=0.5
