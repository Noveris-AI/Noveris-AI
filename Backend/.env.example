# =============================================================================
# Noveris AI Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment
# This configuration is shared between Backend and Frontend (via Vite envDir)

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=Noveris AI Platform
APP_ENV=development
# Options: development, staging, production
DEBUG=true
SECRET_KEY=your-secret-key-change-in-production-min-32-chars

# Application version (optional, used for display)
APP_VERSION=1.0.0

# =============================================================================
# Server Configuration
# =============================================================================
# Backend server host and port
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# Workers for production (use 1 for development)
SERVER_WORKERS=1

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://noveris:noveris123@localhost:5432/noveris

# Connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379/0

# Redis connection pool
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# MinIO Object Storage
# =============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_ENABLED=true

# Default buckets
MINIO_DEFAULT_BUCKET=noveris-data
NODE_ARTIFACTS_BUCKET=noveris-artifacts

# =============================================================================
# Session Configuration
# =============================================================================
SESSION_SECRET=your-session-secret-change-in-production-min-32-chars
SESSION_COOKIE_NAME=session_id
SESSION_MAX_AGE=86400

# Cookie security settings
SESSION_COOKIE_SECURE=false
# Set to true in production with HTTPS
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
# Options: strict, lax, none

# =============================================================================
# CORS Configuration
# =============================================================================
# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://0.0.0.0:3000

# =============================================================================
# Credential Encryption (Node Management)
# =============================================================================
# Master key for credential encryption (AES-256-GCM)
# IMPORTANT: Change this in production and keep it secret! (min 32 chars)
CREDENTIAL_MASTER_KEY=dev-master-key-for-local-testing-32chars!
CREDENTIAL_KEY_VERSION=1

# =============================================================================
# Ansible Configuration
# =============================================================================
# Working directory for ansible-runner
ANSIBLE_WORK_DIR=/var/lib/noveris/ansible

# Path to playbook repository
ANSIBLE_PLAYBOOK_REPO_PATH=/app/ansible/playbooks

# Default SSH arguments
ANSIBLE_SSH_ARGS=-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

# Ansible timeout settings (seconds)
ANSIBLE_DEFAULT_TIMEOUT=300
ANSIBLE_CONNECT_TIMEOUT=30

# =============================================================================
# Job Runner Configuration
# =============================================================================
# Redis queue name for job execution
JOB_QUEUE_NAME=ansible_jobs

# Maximum concurrent jobs per worker
JOB_RUNNER_CONCURRENCY=4

# Grace period for job cancellation (seconds)
JOB_CANCEL_GRACE_PERIOD=30

# Job execution timeout (seconds)
JOB_DEFAULT_TIMEOUT=3600

# =============================================================================
# Node Management Configuration
# =============================================================================
# Default tenant ID (for single-tenant deployments)
DEFAULT_TENANT_ID=00000000-0000-0000-0000-000000000001

# Node connectivity check settings
NODE_HEALTH_CHECK_INTERVAL=60
NODE_CONNECTIVITY_TIMEOUT=30

# =============================================================================
# Alerting Configuration
# =============================================================================
# Alert evaluation interval (seconds)
ALERT_EVALUATION_INTERVAL=60

# Default notification retry settings
ALERT_NOTIFICATION_RETRY_COUNT=3
ALERT_NOTIFICATION_TIMEOUT=30

# =============================================================================
# Cloud Provider Configuration (Optional)
# =============================================================================
# AWS Configuration
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_DEFAULT_REGION=us-east-1

# Azure Configuration
# AZURE_SUBSCRIPTION_ID=your-subscription-id
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret
# AZURE_TENANT_ID=your-tenant-id

# GCP Configuration
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
# GCP_PROJECT_ID=your-project-id

# =============================================================================
# Vault Integration (Optional)
# =============================================================================
# VAULT_ENABLED=false
# VAULT_ADDR=https://vault.example.com:8200
# VAULT_TOKEN=your-vault-token
# VAULT_NAMESPACE=noveris
# VAULT_MOUNT_POINT=secret

# =============================================================================
# Settings Module Configuration
# =============================================================================
# Encryption key for sensitive settings (passwords, secrets, API keys)
# IMPORTANT: Change this in production and keep it secret! (min 32 chars)
SETTINGS_ENCRYPTION_KEY=dev-settings-encryption-key-32chars!!
SETTINGS_ENCRYPTION_SALT=dev-settings-salt-change-in-prod

# =============================================================================
# SSO Configuration
# =============================================================================
SSO_CALLBACK_BASE_URL=http://localhost:3000/api/v1/sso
SSO_STATE_TOKEN_TTL=600

# OIDC Provider (Optional)
# OIDC_ENABLED=false
# OIDC_PROVIDER_URL=https://auth.example.com
# OIDC_CLIENT_ID=noveris
# OIDC_CLIENT_SECRET=your-client-secret

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=Noveris AI <noreply@example.com>
# SMTP_USE_TLS=true

# =============================================================================
# Observability Configuration
# =============================================================================
# OpenTelemetry
# OTEL_ENABLED=false
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=noveris-backend

# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Structured logging
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json
# Options: json, text

# =============================================================================
# Model Market Configuration (Optional)
# =============================================================================
# HUGGINGFACE_TOKEN=hf_xxxxx

# =============================================================================
# Model Deployment Configuration
# =============================================================================
# Service configuration
DEPLOY_DEFAULT_HOST=0.0.0.0
DEPLOY_PORT_RANGE_START=20000
DEPLOY_PORT_RANGE_END=40000

# Directories on target nodes (must exist with proper permissions)
DEPLOY_SYSTEMD_SERVICE_DIR=/etc/systemd/system
DEPLOY_VENV_BASE=/opt/model-runtimes
DEPLOY_USER=modelserve
DEPLOY_WORK_DIR=/var/lib/model-deployments

# Model cache configuration
DEPLOY_MODEL_CACHE_ROOT=/data/models
DEPLOY_LOG_ROOT=/data/logs/models

# Hugging Face configuration (for model downloads)
DEPLOY_HF_TOKEN=hf_xxxxx
DEPLOY_HF_ENDPOINT=https://hf-mirror.com
DEPLOY_HF_HOME=/data/models/huggingface
DEPLOY_HF_HUB_ENABLE_HF_TRANSFER=false
DEPLOY_HF_XET_HIGH_PERFORMANCE=false

# Timeouts and retries
DEPLOY_DOWNLOAD_TIMEOUT=3600
DEPLOY_INSTALL_TIMEOUT=1800
DEPLOY_HEALTH_CHECK_TIMEOUT=30
DEPLOY_HEALTH_CHECK_INTERVAL=60
DEPLOY_MAX_RETRIES=3

# Observability
DEPLOY_ENABLE_METRICS=true
DEPLOY_ENABLE_HEALTH_CHECK=true

# =============================================================================
# Frontend Configuration (Vite environment variables)
# =============================================================================
# Note: Vite requires VITE_ prefix for client-side environment variables

# API base URL for frontend requests
VITE_API_BASE_URL=http://localhost:8000

# Authentication mode (mock=simulated data, real=real backend API)
VITE_AUTH_API_MODE=real

# SSO login enabled
VITE_SSO_ENABLED=false

# Redirect path after successful login
VITE_AUTH_REDIRECT_AFTER_LOGIN=/

# Application name (displayed in UI)
VITE_APP_NAME=Noveris AI Platform

# Application version
VITE_APP_VERSION=1.0.0

# Feature flags
VITE_FEATURE_CLOUD_DISCOVERY=true
VITE_FEATURE_BULK_OPERATIONS=true
VITE_FEATURE_CREDENTIAL_ROTATION=true
VITE_FEATURE_ALERTING=true

# UI Configuration
VITE_DEFAULT_THEME=system
# Options: light, dark, system
VITE_DEFAULT_LANGUAGE=zh-CN
# Options: zh-CN, en-US

# Polling intervals (milliseconds)
VITE_POLLING_INTERVAL_DASHBOARD=30000
VITE_POLLING_INTERVAL_JOBS=3000
VITE_POLLING_INTERVAL_ALERTS=10000
VITE_POLLING_INTERVAL_NODES=15000

# WebSocket configuration (for real-time updates)
VITE_WS_ENABLED=true
VITE_WS_RECONNECT_INTERVAL=5000

# =============================================================================
# Development Settings
# =============================================================================
# Enable development tools
DEV_ENABLE_SWAGGER=true
DEV_ENABLE_REDOC=true

# Test database (for running tests)
# TEST_DATABASE_URL=postgresql://noveris:noveris123@localhost:5432/noveris_test
