# =============================================================================
# Noveris AI Platform - Environment Configuration
# =============================================================================
# Version: 1.0.0
# Updated: 2025-01-14
# =============================================================================
# 使用说明:
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据实际环境修改配置值
# 3. 不要将 .env 文件提交到版本控制
# =============================================================================

# -----------------------------------------------------------------------------
# APP - 应用基础配置
# -----------------------------------------------------------------------------
# 运行环境 (development/staging/production)
# 敏感: 否 | 默认值: development | 验证: 枚举值
APP_ENV=development

# 应用名称
# 敏感: 否 | 默认值: noveris-ai
APP_NAME=noveris-ai

# 应用版本
# 敏感: 否 | 默认值: 1.0.0
APP_VERSION=1.0.0

# 调试模式 (生产环境必须设为 false)
# 敏感: 否 | 默认值: false | 验证: boolean
APP_DEBUG=false

# 时区
# 敏感: 否 | 默认值: UTC
APP_TZ=UTC

# -----------------------------------------------------------------------------
# FRONTEND - 前端配置
# -----------------------------------------------------------------------------
# 前端服务地址 (0.0.0.0 允许外部访问)
# 敏感: 否 | 默认值: http://0.0.0.0:3000
FRONTEND_BASE_URL=http://0.0.0.0:3000

# 前端端口
# 敏感: 否 | 默认值: 3000 | 验证: 1-65535
FRONTEND_PORT=3000

# 认证模式 (mock/real)
# 敏感: 否 | 默认值: mock | 验证: 枚举值
VITE_AUTH_API_MODE=mock

# SSO登录启用
# 敏感: 否 | 默认值: false | 验证: boolean
VITE_SSO_ENABLED=false

# 登录成功后跳转路径
# 敏感: 否 | 默认值: /
VITE_AUTH_REDIRECT_AFTER_LOGIN=/

# -----------------------------------------------------------------------------
# BACKEND - 后端配置
# -----------------------------------------------------------------------------
# API服务地址 (0.0.0.0 允许外部访问)
# 敏感: 否 | 默认值: 0.0.0.0
API_HOST=0.0.0.0

# API服务端口
# 敏感: 否 | 默认值: 8000 | 验证: 1-65535
API_PORT=8000

# 工作进程数
# 敏感: 否 | 默认值: 4 | 验证: 正整数
API_WORKERS=4

# 并发限制
# 敏感: 否 | 默认值: 1000 | 验证: 正整数
API_LIMIT_CONCURRENCY=1000

# Keep-alive 超时 (秒)
# 敏感: 否 | 默认值: 5 | 验证: 正整数
API_TIMEOUT_KEEP_ALIVE=5

# SSO登录成功后跳转路径
# 敏感: 否 | 默认值: /dashboard
SSO_SUCCESS_REDIRECT_PATH=/dashboard

# CORS 允许的源 (逗号分隔) - 0.0.0.0允许所有来源访问
# 敏感: 否 | 默认值: http://0.0.0.0:3000,http://0.0.0.0:8000
CORS_ORIGINS=http://0.0.0.0:3000,http://0.0.0.0:8000,http://localhost:3000,http://localhost:8000

# CORS 允许携带凭据
# 敏感: 否 | 默认值: true | 验证: boolean
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# DB - PostgreSQL 数据库配置
# -----------------------------------------------------------------------------
# 数据库主机
# 敏感: 否 | 默认值: localhost
DB_HOST=localhost

# 数据库端口
# 敏感: 否 | 默认值: 5432 | 验证: 1-65535
DB_PORT=5432

# 数据库名称
# 敏感: 否 | 默认值: noveris_db
DB_NAME=noveris_db

# 数据库用户
# 敏感: 否 | 默认值: noveris_user
DB_USER=noveris_user

# 数据库密码
# 敏感: 是 | 默认值: 无（必须设置） | 验证: 非空字符串
DB_PASSWORD=your_secure_db_password_here

# 数据库连接池大小
# 敏感: 否 | 默认值: 20 | 验证: 正整数
DB_POOL_SIZE=20

# 数据库最大溢出连接数
# 敏感: 否 | 默认值: 10 | 验证: 正整数
DB_MAX_OVERFLOW=10

# 数据库连接超时 (秒)
# 敏感: 否 | 默认值: 30 | 验证: 正整数
DB_CONNECT_TIMEOUT=30

# 异步数据库DSN (自动生成，通常无需修改)
# 格式: postgresql+asyncpg://user:pass@host:port/db
DB_DSN=postgresql+asyncpg://noveris_user:your_secure_db_password_here@localhost:5432/noveris_db

# 同步数据库DSN (用于Alembic迁移)
# 格式: postgresql://user:pass@host:port/db
DB_SYNC_DSN=postgresql://noveris_user:your_secure_db_password_here@localhost:5432/noveris_db

# 自动运行数据库迁移
# 敏感: 否 | 默认值: true | 验证: boolean
AUTO_MIGRATE=true

# -----------------------------------------------------------------------------
# REDIS - 缓存和会话配置
# -----------------------------------------------------------------------------
# Redis启用状态
# 敏感: 否 | 默认值: true | 验证: boolean
REDIS_ENABLED=true

# Redis主机
# 敏感: 否 | 默认值: localhost
REDIS_HOST=localhost

# Redis端口
# 敏感: 否 | 默认值: 6379 | 验证: 1-65535
REDIS_PORT=6379

# Redis密码
# 敏感: 是 | 默认值: 无（生产环境必须设置）
REDIS_PASSWORD=your_redis_password_here

# Redis数据库索引
# 敏感: 否 | 默认值: 0 | 验证: 0-15
REDIS_DB=0

# Redis连接池大小
# 敏感: 否 | 默认值: 50 | 验证: 正整数
REDIS_POOL_SIZE=50

# Redis DSN (自动生成)
REDIS_DSN=redis://:your_redis_password_here@localhost:6379/0

# 会话前缀
# 敏感: 否 | 默认值: session:
REDIS_SESSION_PREFIX=session:

# 限流前缀
# 敏感: 否 | 默认值: ratelimit:
REDIS_RATELIMIT_PREFIX=ratelimit:

# 验证码前缀
# 敏感: 否 | 默认值: verify:
REDIS_VERIFY_PREFIX=verify:

# -----------------------------------------------------------------------------
# SECRET - 安全密钥配置
# -----------------------------------------------------------------------------
# 应用密钥 (用于签名、加密等，至少32字符)
# 敏感: 是 | 默认值: 无（必须设置） | 验证: 32+字符
SECRET_KEY=your_very_long_and_secure_secret_key_at_least_32_characters

# 密码加密盐轮次
# 敏感: 否 | 默认值: 12 | 验证: 4-31
PASSWORD_HASH_ROUNDS=12

# -----------------------------------------------------------------------------
# SESSION - 会话配置
# -----------------------------------------------------------------------------
# Session Cookie 名称
# 敏感: 否 | 默认值: session_id
SESSION_COOKIE_NAME=session_id

# Session Cookie 域名 (留空则不设置)
# 敏感: 否 | 默认值: 空
SESSION_COOKIE_DOMAIN=

# Session Cookie 是否仅HTTPS (生产环境必须true)
# 敏感: 否 | 默认值: false | 验证: boolean
SESSION_COOKIE_SECURE=false

# Session Cookie 是否HttpOnly (防止XSS)
# 敏感: 否 | 默认值: true | 验证: boolean
SESSION_COOKIE_HTTPONLY=true

# Session Cookie SameSite 策略 (strict/lax/none)
# 敏感: 否 | 默认值: lax | 验证: 枚举值
SESSION_COOKIE_SAMESITE=lax

# Session 过期时间 (秒) - 默认1天
# 敏感: 否 | 默认值: 86400 | 验证: 正整数
SESSION_TTL=86400

# Session "记住我" 过期时间 (秒) - 默认30天
# 敏感: 否 | 默认值: 2592000 | 验证: 正整数
SESSION_REMEMBER_TTL=2592000

# 每用户最大并发会话数
# 敏感: 否 | 默认值: 5 | 验证: 正整数
SESSION_MAX_SESSIONS_PER_USER=5

# Session 延长策略 (活动时自动延长)
# 敏感: 否 | 默认值: true | 验证: boolean
SESSION_EXTEND_ON_ACTIVITY=true

# -----------------------------------------------------------------------------
# CSRF - CSRF 保护配置
# -----------------------------------------------------------------------------
# CSRF 保护启用状态
# 敏感: 否 | 默认值: true | 验证: boolean
CSRF_ENABLED=true

# CSRF Cookie 名称
# 敏感: 否 | 默认值: csrf_token
CSRF_COOKIE_NAME=csrf_token

# CSRF Cookie 域名
# 敏感: 否 | 默认值: 空
CSRF_COOKIE_DOMAIN=

# CSRF Cookie 是否仅HTTPS
# 敏感: 否 | 默认值: false | 验证: boolean
CSRF_COOKIE_SECURE=false

# CSRF Cookie 是否HttpOnly
# 敏感: 否 | 默认值: false | 验证: boolean
CSRF_COOKIE_HTTPONLY=false

# CSRF Cookie SameSite 策略
# 敏感: 否 | 默认值: strict | 验证: 枚举值
CSRF_COOKIE_SAMESITE=strict

# CSRF Token 长度
# 敏感: 否 | 默认值: 32 | 验证: 16-64
CSRF_TOKEN_LENGTH=32

# CSRF Header 名称
# 敏感: 否 | 默认值: X-CSRF-Token
CSRF_HEADER_NAME=X-CSRF-Token

# -----------------------------------------------------------------------------
# PASSWORD - 密码策略配置
# -----------------------------------------------------------------------------
# 密码最小长度
# 敏感: 否 | 默认值: 8 | 验证: 6-128
PASSWORD_MIN_LENGTH=8

# 密码最大长度
# 敏感: 否 | 默认值: 128 | 验证: 6-256
PASSWORD_MAX_LENGTH=128

# 要求大写字母
# 敏感: 否 | 默认值: true | 验证: boolean
PASSWORD_REQUIRE_UPPERCASE=true

# 要求小写字母
# 敏感: 否 | 默认值: true | 验证: boolean
PASSWORD_REQUIRE_LOWERCASE=true

# 要求数字
# 敏感: 否 | 默认值: true | 验证: boolean
PASSWORD_REQUIRE_DIGIT=true

# 要求特殊字符
# 敏感: 否 | 默认值: true | 验证: boolean
PASSWORD_REQUIRE_SPECIAL=true

# 允许的特殊字符集
# 敏感: 否 | 默认值: !@#$%^&*()_+-=[]{}|;:,.<>?
PASSWORD_SPECIAL_CHARS=!@#$%^&*()_+-=[]{}|;:,.<>?

# -----------------------------------------------------------------------------
# RATE_LIMIT - 限流配置
# -----------------------------------------------------------------------------
# 限流启用状态
# 敏感: 否 | 默认值: true | 验证: boolean
RATE_LIMIT_ENABLED=true

# 默认限流 (请求数/时间窗口秒)
# 敏感: 否 | 默认值: 100/60
RATE_LIMIT_DEFAULT=100
RATE_LIMIT_WINDOW=60

# 登录尝试限流
# 敏感: 否 | 默认值: 5/300
RATE_LIMIT_LOGIN_ATTEMPTS=5
RATE_LIMIT_LOGIN_WINDOW=300

# 验证码请求限流
# 敏感: 否 | 默认值: 3/3600
RATE_LIMIT_CODE_REQUESTS=3
RATE_LIMIT_CODE_WINDOW=3600

# IP封禁时长 (秒) - 超过限流后
# 敏感: 否 | 默认值: 3600 | 验证: 正整数
RATE_LIMIT_BAN_DURATION=3600

# -----------------------------------------------------------------------------
# VERIFY - 验证码和重置令牌配置
# -----------------------------------------------------------------------------
# 验证码长度
# 敏感: 否 | 默认值: 6 | 验证: 4-8
VERIFY_CODE_LENGTH=6

# 验证码有效期 (秒) - 默认10分钟
# 敏感: 否 | 默认值: 600 | 验证: 正整数
VERIFY_CODE_TTL=600

# 重置令牌有效期 (秒) - 默认1小时
# 敏感: 否 | 默认值: 3600 | 验证: 正整数
RESET_TOKEN_TTL=3600

# 重置模式 (token/code/both) - token通过邮件链接，code手动输入
# 敏感: 否 | 默认值: token | 验证: 枚举值
RESET_MODE=token

# 注册是否需要验证码
# 敏感: 否 | 默认值: false | 验证: boolean
REGISTER_REQUIRE_CODE=false

# 开发环境下在控制台打印验证码
# 敏感: 否 | 默认值: true | 验证: boolean
VERIFY_DEV_LOG_CODE=true

# -----------------------------------------------------------------------------
# SSO_OIDC - OIDC SSO 配置
# -----------------------------------------------------------------------------
# OIDC提供商配置 (格式: provider_id|provider_name|enabled|key=value|...)
# 示例: google|Google|true|client_id=xxx|client_secret=yyy|discovery_url=https://accounts.google.com/.well-known/openid-configuration|scope=openid email profile
SSO_OIDC_PROVIDERS=

# Google OIDC 配置示例 (取消注释并配置)
# SSO_OIDC_GOOGLE_CLIENT_ID=your_google_client_id
# SSO_OIDC_GOOGLE_CLIENT_SECRET=your_google_client_secret
# SSO_OIDC_GOOGLE_DISCOVERY_URL=https://accounts.google.com/.well-known/openid-configuration
# SSO_OIDC_GOOGLE_SCOPE=openid email profile

# Azure AD OIDC 配置示例
# SSO_OIDC_AZURE_CLIENT_ID=your_azure_client_id
# SSO_OIDC_AZURE_CLIENT_SECRET=your_azure_client_secret
# SSO_OIDC_AZURE_DISCOVERY_URL=https://login.microsoftonline.com/{tenant_id}/v2.0/.well-known/openid-configuration
# SSO_OIDC_AZURE_SCOPE=openid email profile

# Auth0 OIDC 配置示例
# SSO_OIDC_AUTH0_CLIENT_ID=your_auth0_client_id
# SSO_OIDC_AUTH0_CLIENT_SECRET=your_auth0_client_secret
# SSO_OIDC_AUTH0_DOMAIN=your-tenant.auth0.com
# SSO_OIDC_AUTH0_DISCOVERY_URL=https://your-tenant.auth0.com/.well-known/openid-configuration
# SSO_OIDC_AUTH0_SCOPE=openid email profile

# -----------------------------------------------------------------------------
# SSO_OAUTH2 - OAuth2 SSO 配置
# -----------------------------------------------------------------------------
# OAuth2提供商配置 (格式: provider_id|provider_name|enabled|key=value|...)
# 示例: github|GitHub|true|client_id=xxx|client_secret=yyy|auth_url=https://github.com/login/oauth/authorize|token_url=https://github.com/login/oauth/access_token|user_url=https://api.github.com/user
SSO_OAUTH2_PROVIDERS=

# GitHub OAuth2 配置示例
# SSO_OAUTH2_GITHUB_CLIENT_ID=your_github_client_id
# SSO_OAUTH2_GITHUB_CLIENT_SECRET=your_github_client_secret
# SSO_OAUTH2_GITHUB_AUTH_URL=https://github.com/login/oauth/authorize
# SSO_OAUTH2_GITHUB_TOKEN_URL=https://github.com/login/oauth/access_token
# SSO_OAUTH2_GITHUB_USER_URL=https://api.github.com/user
# SSO_OAUTH2_GITHUB_SCOPE=user:email

# -----------------------------------------------------------------------------
# SSO_SAML - SAML SSO 配置
# -----------------------------------------------------------------------------
# SAML提供商配置 (格式: provider_id|provider_name|enabled|key=value|...)
SSO_SAML_PROVIDERS=

# SaaS SAML配置示例 (如Okta, OneLogin等)
# SSO_SAML_OKTA_ENTITY_ID=your_okta_entity_id
# SSO_SAML_OKTA_METADATA_URL=https://dev-xxx.okta.com/app/exkxxx/sso/saml/metadata
# SSO_SAML_OKTO_ACS_URL=https://your-app.com/api/v1/auth/saml/acs
# SSO_SAML_OKTO_X509_CERT=your_x509_certificate

# -----------------------------------------------------------------------------
# SMTP - 邮件服务配置
# -----------------------------------------------------------------------------
# SMTP启用状态
# 敏感: 否 | 默认值: false | 验证: boolean
SMTP_ENABLED=false

# SMTP服务器地址
# 敏感: 否 | 默认值: localhost
SMTP_HOST=localhost

# SMTP服务器端口
# 敏感: 否 | 默认值: 587 | 验证: 1-65535
SMTP_PORT=587

# SMTP用户名
# 敏感: 是 | 默认值: 空
SMTP_USERNAME=

# SMTP密码
# 敏感: 是 | 默认值: 空
SMTP_PASSWORD=

# 发件人邮箱
# 敏感: 否 | 默认值: noreply@noveris.ai
SMTP_FROM=noreply@noveris.ai

# 发件人显示名称
# 敏感: 否 | 默认值: Noveris AI
SMTP_FROM_NAME=Noveris AI

# 使用TLS加密
# 敏感: 否 | 默认值: true | 验证: boolean
SMTP_USE_TLS=true

# 邮件模板目录
# 敏感: 否 | 默认值: ./templates/email
SMTP_TEMPLATE_DIR=./templates/email

# -----------------------------------------------------------------------------
# MINIO - 对象存储配置
# -----------------------------------------------------------------------------
# MinIO启用状态
# 敏感: 否 | 默认值: false | 验证: boolean
MINIO_ENABLED=false

# MinIO端点
# 敏感: 否 | 默认值: localhost:9000
MINIO_ENDPOINT=localhost:9000

# MinIO访问密钥
# 敏感: 是 | 默认值: 无（启用时必须设置）
MINIO_ACCESS_KEY=

# MinIO密钥
# 敏感: 是 | 默认值: 无（启用时必须设置）
MINIO_SECRET_KEY=

# MinIO默认存储桶
# 敏感: 否 | 默认值: noveris
MINIO_BUCKET=noveris

# MinIO使用HTTPS
# 敏感: 否 | 默认值: false | 验证: boolean
MINIO_SECURE=false

# -----------------------------------------------------------------------------
# ES - Elasticsearch 配置
# -----------------------------------------------------------------------------
# Elasticsearch启用状态
# 敏感: 否 | 默认值: false | 验证: boolean
ES_ENABLED=false

# Elasticsearch DSN
# 敏感: 否 | 默认值: http://localhost:9200
ES_DSN=http://localhost:9200

# Elasticsearch索引前缀
# 敏感: 否 | 默认值: noveris
ES_INDEX_PREFIX=noveris

# -----------------------------------------------------------------------------
# OBS - 可观测性配置
# -----------------------------------------------------------------------------
# 日志级别 (DEBUG/INFO/WARNING/ERROR/CRITICAL)
# 敏感: 否 | 默认值: INFO | 验证: 枚举值
LOG_LEVEL=INFO

# 日志格式 (json/text)
# 敏感: 否 | 默认值: json | 验证: 枚举值
LOG_FORMAT=json

# 日志输出路径 (留空则为标准输出)
# 敏感: 否 | 默认值: 空
LOG_PATH=

# 请求日志启用
# 敏感: 否 | 默认值: true | 验证: boolean
LOG_REQUESTS=true

# 敏感信息脱敏 (密码、token等)
# 敏感: 否 | 默认值: true | 验证: boolean
LOG_SANITIZE=true

# 链路追踪启用
# 敏感: 否 | 默认值: false | 验证: boolean
TRACING_ENABLED=false

# Jaeger端点
# 敏感: 否 | 默认值: http://localhost:14268/api/traces
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# 指标收集启用
# 敏感: 否 | 默认值: false | 验证: boolean
METRICS_ENABLED=false

# Prometheus端口
# 敏感: 否 | 默认值: 9090 | 验证: 1-65535
METRICS_PORT=9090

# -----------------------------------------------------------------------------
# DOCKER - Docker Compose 配置
# -----------------------------------------------------------------------------
# Docker网络名称
# 敏感: 否 | 默认值: novaris-network
DOCKER_NETWORK=noveris-network

# 后端内存限制
# 敏感: 否 | 默认值: 1G
BACKEND_MEMORY_LIMIT=1G

# 后端CPU限制
# 敏感: 否 | 默认值: 1
BACKEND_CPU_LIMIT=1

# 后端内存保留
# 敏感: 否 | 默认值: 512M
BACKEND_MEMORY_RESERVATION=512M

# 后端CPU保留
# 敏感: 否 | 默认值: 0.5
BACKEND_CPU_RESERVATION=0.5

# -----------------------------------------------------------------------------
# DEVELOPMENT - 开发环境专用配置
# -----------------------------------------------------------------------------
# 自动重载 (开发模式)
# 敏感: 否 | 默认值: true | 验证: boolean
DEV_AUTO_RELOAD=true

# Swagger文档启用
# 敏感: 否 | 默认值: true | 验证: boolean
DOCS_ENABLED=true

# CORS允许所有源 (仅开发环境)
# 敏感: 否 | 默认值: false | 验证: boolean
DEV_CORS_ALLOW_ALL=false

# =============================================================================
# 配置文件结束
# =============================================================================
